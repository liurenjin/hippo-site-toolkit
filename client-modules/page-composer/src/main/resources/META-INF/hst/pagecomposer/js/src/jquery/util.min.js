jQuery.noConflict();(function(a){a.namespace("Hippo.Util");Hippo.Util.Map=Class.extend({init:function(){this.keys=[];this.values={}},put:function(b,c){this.keys.push(b);this.values[b]=c},get:function(b){if(this.containsKey(b)){return this.values[b]}return null},containsKey:function(b){return a.inArray(b,this.keys)>-1},remove:function(d){var b=a.inArray(d,this.keys);if(b>-1){this.keys.removeByIndex(b);var c=this.values[d];delete this.values[d];return c}else{throw new Error("Remove failed: No entry found for key "+d)}},each:function(g,e){e=e||this;var b=this.keys.length;for(var d=0;d<b;++d){var c=this.keys[d];g.apply(e,[c,this.values[c]])}},keySet:function(){var d=[],b=this.keys.length;for(var c=0;c<b;++c){d.push(this.keys[c])}return d},getIndexMap:function(){var c={};for(var b=0;b<this.keys.length;b++){c[this.keys[b]]=b+1}return c},size:function(){return this.keys.length},clear:function(){this.keys=[];this.values={}}});Hippo.Util.OrderedMap=Hippo.Util.Map.extend({put:function(c,d,b){if(typeof b==="undefined"){this._super(c,d)}else{this.keys.splice(b,0,c);this.values[c]=d}},updateOrder:function(b){var c=this.keys;this.keys=b;return b!=c}});Hippo.Util.Draw=Class.extend({init:function(b){this.cache={};this.config=a.extend({min:0,thresholdHigh:0.8,thresholdLow:0,beforeOffset:2,afterOffset:2},b)},_draw:function(h,c,f,i,j,d){d=a.extend({},this.config,d);var k=h+c[0].id;var e=this.cache[k];if(typeof e==="undefined"){var b={offset:c.offset(),width:c.outerWidth(),height:c.outerHeight()};var g={direction:j,width:b.width,height:b.height,left:b.offset.left,top:b.offset.top};if(j==HST.DIR.VERTICAL){g.width-=(g.width*d.thresholdLow);g.height=d.min>0?d.min:g.height-(g.height*d.thresholdHigh)}else{if(j==HST.DIR.HORIZONTAL){g.height-=(g.height*d.thresholdLow);g.width=d.min>0?d.min:g.width-(g.width*d.thresholdHigh)}}e={src:b,ind:g};i.call(this,e);this.cache[k]=e}f.width(e.ind.width);f.height(e.ind.height);f.offset({left:e.ind.left,top:e.ind.top})},inside:function(d,b,e,c){this._draw("inside",d,b,function(f){f.ind.left+=(f.src.width-f.ind.width)/2;f.ind.top+=(f.src.height-f.ind.height)/2},e,c)},after:function(d,b,e,c){this._draw("after",d,b,function(f){if(e==HST.DIR.VERTICAL){f.ind.left+=(f.src.width-f.ind.width)/2;f.ind.top+=f.src.height+this.config.afterOffset}else{f.ind.left+=f.src.width+this.config.afterOffset;f.ind.top-=this.config.afterOffset}},e,c)},before:function(d,b,e,c){this._draw("before",d,b,function(f){if(e==HST.DIR.VERTICAL){f.ind.left+=(f.src.width-f.ind.width)/2;f.ind.top-=this.config.beforeOffset}else{if(e==HST.DIR.HORIZONTAL){f.ind.left-=this.config.beforeOffset;f.ind.top-=this.config.beforeOffset}}},e,c)},between:function(e,c,b,f,d){this._draw("between",e,b,function(i){var h=c.offset();if(f==HST.DIR.VERTICAL){i.ind.left+=(i.src.width-i.ind.width)/2;var g=i.ind.top+i.src.height;i.ind.top=g+((h.top-g)/2)-(i.ind.height/2)}else{if(f==HST.DIR.HORIZONTAL){i.ind.left+=i.src.width}}},f,d)},reset:function(){this.cache={}}})})(jQuery);Array.prototype.removeByIndex=function(c,b){var a=this.slice((b||c)+1||this.length);this.length=c<0?this.length+c:c;return this.push.apply(this,a)};